# ローカルガチャ抽選機 (PWA)

iPad/Safari でホーム画面に追加してオフラインでも使えるローカル抽選アプリです。ローカル画像・音声を使い、抽選状態は端末内ストレージに保持します。

## 特徴
- 3 つの START ボタンは同一動作のスロット風トリガー
- 「今回の挑戦回数」を上部で即設定可能（次の人へでリセット）
- 当たり/ハズレ画像 A〜E と当たり本数、当たりテキストを柔軟に設定
- 画像・音声はローカルファイル選択または同階層の a.png〜e.png / roulette.mp3 / atari.mp3 / hazure.mp3 を自動読み込み
- PWA 対応（manifest + Service Worker）。一度読み込めばオフラインでも利用可能

## 使い方（ローカル）
1) 任意のディレクトリで HTTP サーバーを起動例:
   ```bash
   python3 -m http.server 8000
   ```
2) `http://localhost:8000` をブラウザで開く。
3) 画像・音声を同フォルダに置くか、設定画面のファイル入力から読み込む。
4) 「今回の挑戦回数」を入力し「セット」で有効化、START ボタンで抽選。
5) 「次の人へ」で挑戦回数とその人の試行/当たりカウンタだけを 0 に戻す（残りくじ・当たり数は維持）。

## iPad / PWA インストール
- Safari で `http://<サーバーIP>:8000` を開き、「共有」→「ホーム画面に追加」。
- 追加後はホームアイコンから起動してオフラインでも動作（初回ロード時にキャッシュ）。

## 設定のポイント
- 抽選設定: 総くじ数と当たり本数、当たりテキストを入力し「抽選設定を保存して現在の部をリセット」で反映。
- 当たり内訳: A〜E の「有効／当たり／当たり本数／ラベル」を調整し、合計が「合計当たり本数」と一致する必要があります。
- サウンド: start/resultWin/resultLose を個別に選択可能。未設定の場合は同階層の mp3 を使用。
- データ保存: 抽選状態・画像・音声・設定はブラウザのローカルストレージに保存されます。ストレージを削除するとリセットされます。

## 開発メモ
- `manifest.webmanifest` と `sw.js` を追加済み。キャッシュ更新が必要な場合は `sw.js` の `CACHE_NAME` を更新してください。
- ローカルのみで完結する構成（ビルドなしのシングル HTML）。
